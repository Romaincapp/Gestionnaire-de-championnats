<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Championnats</title>
    <link rel="stylesheet"  href="styles.css">


</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ† Gestionnaire de Championnats</h1>
            <p>PlantÃ© !!! avec â¤ï¸ par Romain</p>
        </div>

        <!-- ONGLETS -->
        <div class="tabs-container">
            <div class="tabs" id="tabs">
                <button class="tab active" onclick="switchTab(1)" data-day="1">
                    JournÃ©e 1
                </button>
                 <button class="add-day-btn" onclick="addNewDay()" title="Ajouter une journÃ©e">+</button>
                <button class="tab general-ranking" onclick="switchToGeneralRanking()" data-tab="general">
                    ğŸ† Classement GÃ©nÃ©ral
                </button>
            </div>
        </div>

        <div class="content">
            <!-- CONFIGURATION -->
            <div style="background: linear-gradient(135deg, #16a085, #1abc9c); padding: 15px; border-radius: 10px; margin-bottom: 20px; color: white;">
                <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap; justify-content: center;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-weight: bold;">âš™ï¸ Divisions:</span>
                        <select id="divisionConfig" onchange="updateDivisionConfig()" style="padding: 8px; border-radius: 5px; border: none; font-size: 14px;">
                            <option value="1">1 Division</option>
                            <option value="2">2 Divisions</option>
                            <option value="3" selected>3 Divisions</option>
                            <option value="4">4 Divisions</option>
                            <option value="5">5 Divisions</option>
                            <option value="6">6 Divisions</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-weight: bold;">ğŸ¾ Terrains:</span>
                        <select id="courtConfig" onchange="updateCourtConfig()" style="padding: 8px; border-radius: 5px; border: none; font-size: 14px;">
                            <option value="1">1 Terrain</option>
                            <option value="2">2 Terrains</option>
                            <option value="3">3 Terrains</option>
                            <option value="4" selected>4 Terrains</option>
                            <option value="5">5 Terrains</option>
                            <option value="6">6 Terrains</option>
                            <option value="8">8 Terrains</option>
                            <option value="10">10 Terrains</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="chronoModeCheckbox" onchange="toggleChronoMode()" style="width: 20px; height: 20px; cursor: pointer;">
                        <label for="chronoModeCheckbox" style="font-weight: bold; cursor: pointer;">â±ï¸ Mode Chrono</label>
                    </div>
                    <button class="btn" onclick="applyConfiguration()" style="background: white; color: #16a085; font-weight: bold; padding: 8px 20px;">
                        âœ… Appliquer Configuration
                    </button>
                </div>
                <div id="courtAssignmentInfo" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; font-size: 13px; text-align: center;">
                    <!-- Information sur l'attribution des terrains sera ajoutÃ©e ici -->
                </div>
            </div>

            <!-- MODE CHRONO -->
            <div id="chronoModeSection" style="display: none;">
                <div class="section" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h2 style="color: white; text-align: center; margin-bottom: 20px;">â±ï¸ Gestion des SÃ©ries de Course</h2>

                    <!-- Gestion des sÃ©ries -->
                    <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0; color: #2c3e50;">ğŸƒ Ã‰preuves et SÃ©ries</h3>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="btn" onclick="showParticipantsManager()" style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white;">
                                    ğŸ‘¥ Ajouter des participants
                                </button>
                                <button class="btn" onclick="showAddEventModal()" style="background: linear-gradient(135deg, #e67e22, #d35400); color: white;">
                                    ğŸ… Nouvelle Ã‰preuve
                                </button>
                                <button class="btn btn-success" onclick="showAddSerieModal()">
                                    â• Nouvelle SÃ©rie
                                </button>
                                <button class="btn" onclick="showOverallChronoRanking()" style="background: linear-gradient(135deg, #16a085, #1abc9c); color: white;">
                                    ğŸ† Classement GÃ©nÃ©ral
                                </button>
                                <button class="btn" onclick="exportChronoCompetition()" style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white;">
                                    ğŸ’¾ Exporter CompÃ©tition
                                </button>
                                <button class="btn" onclick="importChronoCompetition()" style="background: linear-gradient(135deg, #3498db, #2980b9); color: white;">
                                    ğŸ“¥ Importer CompÃ©tition
                                </button>
                            </div>
                        </div>

                        <div id="eventsList" style="display: grid; gap: 20px;">
                            <!-- Les Ã©preuves et sÃ©ries seront affichÃ©es ici -->
                        </div>

                        <div id="noEventsMessage" style="text-align: center; padding: 40px; color: #7f8c8d;">
                            Aucune Ã©preuve crÃ©Ã©e. Cliquez sur "ğŸ… Nouvelle Ã‰preuve" pour commencer.
                        </div>
                    </div>

                    <!-- Classement gÃ©nÃ©ral chrono -->
                    <div id="overallChronoRanking" style="display: none; margin-top: 20px;">
                        <!-- Le classement gÃ©nÃ©ral sera gÃ©nÃ©rÃ© ici -->
                    </div>

                    <div id="raceInterface" style="display: none; margin-top: 20px;">
                        <!-- Interface de gestion de course sera gÃ©nÃ©rÃ©e ici -->
                    </div>
                </div>
            </div>

            <!-- CONTENU JOURNÃ‰E -->
            <div class="tab-content day-content active" id="day-1">
                <div class="section">
                    <h2>ğŸ‘¥ Gestion des Joueurs - JournÃ©e 1</h2>
                    <div style="text-align: center; margin: 15px 0; padding: 15px; background: linear-gradient(135deg, #fff3cd, #ffeaa7); border-radius: 8px; border: 3px solid #f39c12;">
                    <strong style="color: #e67e22; font-size: 18px;">âš ï¸ CHOISISSEZ D'ABORD LA JOURNÃ‰E DE DESTINATION !</strong>
                    </div>

                    <div class="input-group" style="align-items: end;">
                        <input type="text" id="playerName" placeholder="Nom du joueur" style="flex: 1; min-width: 200px;">
                        <select id="playerDivision">
                                <option value="1">Division 1</option>
                                <option value="2">Division 2</option>
                                <option value="3">Division 3</option>
                            </select>
                            <div style="display: flex; flex-direction: column; min-width: 180px;">
                             <label style="font-size: 14px; color: #e67e22; font-weight: bold; margin-bottom: 5px; text-transform: uppercase;">ğŸ¯ Destination :</label>
                                <select id="targetDay" style="background: #f39c12; color: white; font-weight: bold; border: 3px solid #e67e22; padding: 12px; border-radius: 8px; font-size: 14px;">
                        <option value="1">â†’ JournÃ©e 1</option>
        </select>
    </div>
    <button class="btn btn-success" onclick="addPlayer()">Ajouter Joueur</button>
</div>

                    <div class="import-section">
                        <div class="import-box">
                            <h4>ğŸ“ Import fichier Excel/CSV</h4>
                            <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 15px;">
                                Format : Colonne A = Noms, Colonne B = Division (1,2,3)
                            </p>
                            <div style="margin-bottom: 10px;">
                                <label style="font-weight: bold; color: #e67e22; display: block; margin-bottom: 5px; font-size: 12px;">ğŸ¯ DESTINATION :</label>
                                    <select id="fileTargetDay" style="width: 100%; background: #f39c12; color: white; font-weight: bold; border: 2px solid #e67e22; padding: 10px; border-radius: 6px;">
                                     <option value="1">â†’ JournÃ©e 1</option>
                              </select>
                            </div>
                            <div class="file-input-wrapper">
                                <input type="file" id="fileInput" accept=".xlsx,.xls,.csv">
                                <label for="fileInput" class="file-input-label">
                                    ğŸ“ Choisir un fichier
                                </label>
                            </div>
                        </div>

                        <div class="import-box">
                            <h4>ğŸ“‹ Copier-coller par division</h4>
                            <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 15px;">
                                Collez une liste de noms (un par ligne)
                            </p>
                            <div style="display: flex; gap: 10px; flex-direction: column;">
                                <select id="bulkDivision" style="width: 100%;">
                                            <option value="1">Division 1</option>
                                            <option value="2">Division 2</option>
                                            <option value="3">Division 3</option>
                                            </select>
                                                <div>
                                            <label style="font-weight: bold; color: #e67e22; display: block; margin-bottom: 5px; font-size: 12px;">ğŸ¯ DESTINATION :</label>
                                            <select id="bulkTargetDay" style="width: 100%; background: #f39c12; color: white; font-weight: bold; border: 2px solid #e67e22; padding: 10px; border-radius: 6px;">
                            <option value="1">â†’ JournÃ©e 1</option>
                    </select>
                    </div>
                                    <button class="btn" onclick="showBulkInput()" style="width: 100%;">
                                            ğŸ“ Ajouter en masse
                                        </button>
                                </div>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); border-radius: 12px; padding: 20px; margin: 20px auto; max-width: 900px; border: 2px solid #dee2e6;">
                        <h3 style="color: #2c3e50; margin: 0 0 15px 0; font-size: 18px; text-align: center;">ğŸ¯ Type de GÃ©nÃ©ration</h3>

                        <!-- Modes standards -->
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 12px;">
                            <button class="btn" onclick="generateMatchesForDay()" style="background: linear-gradient(135deg, #3498db, #2980b9); padding: 10px 12px; font-size: 13px;">
                                ğŸ”„ Round-Robin
                            </button>
                            <button class="btn" onclick="generateMatchesOptimized4to10()" style="background: linear-gradient(135deg, #e67e22, #d35400); padding: 10px 12px; font-size: 13px;">
                                ğŸ² OptimisÃ© 4-10
                            </button>
                            <button class="btn" onclick="generateMatchesByCourtOptimized()" style="background: linear-gradient(135deg, #16a085, #1abc9c); padding: 10px 12px; font-size: 13px;">
                                ğŸ¾ Par Terrain
                            </button>
                            <button class="btn" onclick="generateMatchesSwissSystem()" style="background: linear-gradient(135deg, #16a085, #1abc9c); padding: 10px 12px; font-size: 13px;">
                                ğŸ† Swiss System
                            </button>
                        </div>

                        <div style="padding: 8px 12px; background: rgba(255,255,255,0.7); border-radius: 6px; font-size: 11px; color: #6c757d; line-height: 1.5; text-align: center;">
                            <strong>Round-Robin:</strong> Tous contre tous â€¢ <strong>OptimisÃ©:</strong> SchÃ©ma fixe 4-10 joueurs â€¢ <strong>Par Terrain:</strong> 4-10/terrain â€¢ <strong>Swiss:</strong> Par niveau
                        </div>
                    </div>

                    <div class="guide-box">
                        <div class="guide-title">
                            ğŸ’¡ Guide d'utilisation
                        </div>
                        <div class="guide-items">
                            <div class="guide-item">
                                <div class="key">TAB</div>
                                <span>Passer au champ suivant</span>
                            </div>
                            <div class="guide-item">
                                <div class="key">ENTER</div>
                                <span>Mettre Ã  jour le match</span>
                            </div>
                            <div class="guide-item">
                                <span>ğŸ† Entrez les scores finaux de chaque Ã©quipe/joueur</span>
                            </div>
                            <div class="guide-item">
                                <span>ğŸ’¾ Sauvegarde automatique</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-buttons">
    <button class="btn btn-success" onclick="updateRankings()">
        ğŸ† Afficher les Classements
    </button>
    <button class="btn" onclick="generateMatchesForDay(1)">
        ğŸ¯ GÃ©nÃ©rer les Matchs
    </button>
    <button class="btn" onclick="showByeManagementModal(1)" style="background: linear-gradient(135deg, #16a085, #1abc9c);">
        ğŸ¯ GÃ©rer BYE
    </button>
    <button class="btn btn-danger" onclick="clearAllData()">
        ğŸ—‘ï¸ RÃ©initialiser TOUT
    </button>
    <button class="btn" onclick="exportChampionship()">
        ğŸ’¾ Exporter Championnat
    </button>
    <button class="btn" onclick="showImportModal()">
        ğŸ“¥ Importer Championnat
    </button>
</div>
                </div>

                <div class="divisions" id="divisions-1">
                    <!-- Les divisions seront gÃ©nÃ©rÃ©es dynamiquement -->
                </div>

                <div class="rankings-section" id="rankings-1" style="display: none;">
                    <div class="rankings-header">
                        <div class="rankings-title">ğŸ† Classements JournÃ©e 1</div>
                        <div class="rankings-toggle">
                            <button class="toggle-btn active" onclick="showRankings('points')">Par Points</button>
                            <button class="toggle-btn" onclick="showRankings('winrate')">Par % Victoires</button>
                        </div>
                    </div>
                    <div id="rankingsContent-1"></div>
                </div>

                <div class="stats" id="stats-1" style="display: none;">
                    <h3>ğŸ“Š Statistiques JournÃ©e 1</h3>
                    <div class="stats-grid" id="statsContent-1"></div>
                </div>
            </div>

            <!-- CLASSEMENT GÃ‰NÃ‰RAL -->
            <div class="tab-content general-content" id="general-ranking">
                <div class="section general-ranking-section">
                    <h2>ğŸ† Classement GÃ©nÃ©ral du Championnat</h2>

                    <div class="general-stats" id="generalStats">
                        <!-- Stats gÃ©nÃ©rales seront gÃ©nÃ©rÃ©es ici -->
                    </div>

                    <div class="control-buttons" style="margin-bottom: 30px;">
                        <button class="btn btn-warning" onclick="updateGeneralRanking()">
                            ğŸ”„ Mettre Ã  jour Classement GÃ©nÃ©ral
                        </button>
                         <button class="btn btn-success" onclick="exportGeneralRanking()">
                            ğŸ“Š Exporter JSON
                        </button>
                        <button class="btn" onclick="exportGeneralRankingToPDF()" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            ğŸ“„ Exporter PDF
                        </button>
                        <button class="btn" onclick="exportGeneralRankingToHTML()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                        ğŸ“„ Exporter HTML
                        </button>
                    </div>

                    <div id="generalRankingContent">
                        <div class="empty-state">
                            Terminez au moins un match dans une journÃ©e pour voir le classement gÃ©nÃ©ral
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <h3>Importer un Championnat</h3>
            <div style="margin-bottom: 20px;">
                <div class="file-input-wrapper">
                    <input type="file" id="importFileInput" accept=".json">
                    <label for="importFileInput" class="file-input-label">
                        ğŸ“ Choisir un fichier JSON
                    </label>
                </div>
            </div>
            <p style="margin: 15px 0; color: #7f8c8d; font-size: 14px;">
                âš ï¸ L'import remplacera complÃ¨tement le championnat actuel
            </p>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeImportModal()">Annuler</button>
                <button class="btn btn-success" onclick="processImport()">Importer</button>
            </div>
        </div>
    </div>

    <div id="bulkModal" class="modal">
        <div class="modal-content">
            <h3>Ajouter plusieurs joueurs</h3>
            <p style="margin-bottom: 15px; color: #7f8c8d;">
                Collez la liste des noms (un par ligne) pour la <strong id="selectedDivision">Division 1</strong> :
            </p>
            <textarea id="bulkText" placeholder="Joueur 1&#10;Joueur 2&#10;Joueur 3&#10;..."
                      style="width: 100%; height: 200px; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-family: inherit; resize: vertical;"></textarea>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeBulkModal()">Annuler</button>
                <button class="btn btn-success" onclick="addBulkPlayers()">Ajouter tous</button>
            </div>
        </div>
    </div>

    <div id="playerModal" class="player-modal">
        <div class="player-modal-content">
            <div class="player-modal-header">
                <div class="player-name-title" id="playerNameTitle"></div>
                <button class="close-modal" onclick="closePlayerModal()">Ã—</button>
            </div>
            <div class="player-overview" id="playerOverview"></div>
            <div class="matches-history">
                <h3 style="color: #2c3e50; margin-bottom: 15px;">ğŸ“‹ Historique des matchs</h3>
                <div id="playerMatches"></div>
            </div>
        </div>
    </div>

    <!-- Modal Ã‰preuve -->
    <div id="eventModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <h3 id="eventModalTitle">ğŸ… Nouvelle Ã‰preuve</h3>
            <div style="display: grid; gap: 15px;">
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ“ Nom de l'Ã©preuve:</label>
                    <input type="text" id="eventName" placeholder="Ex: 400m Dames, 1500m Hommes, Relais 4x100..." style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸƒ Type de sport:</label>
                    <select id="eventSportType" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                        <option value="running">Course Ã  pied</option>
                        <option value="cycling">VÃ©lo</option>
                        <option value="swimming">Natation</option>
                    </select>
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ“ Distance (en mÃ¨tres):</label>
                    <input type="number" id="eventDistance" value="400" min="1" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ”„ Type de course:</label>
                    <select id="eventRaceType" onchange="updateEventRelayOptions()" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                        <option value="individual">Individuelle</option>
                        <option value="relay">Relais</option>
                    </select>
                </div>

                <div id="eventRelayDurationSection" style="display: none;">
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">â° DurÃ©e du relais (minutes):</label>
                    <input type="number" id="eventRelayDuration" value="60" min="1" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>

                <div style="background: #e8f4f8; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                    <p style="margin: 0; font-size: 14px; color: #2c3e50;">
                        <strong>â„¹ï¸ Info:</strong> Une Ã©preuve peut contenir plusieurs sÃ©ries. Par exemple, "400m Dames" peut avoir 3 sÃ©ries de 8 coureuses chacune.
                    </p>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeEventModal()">Annuler</button>
                <button class="btn btn-success" onclick="saveEvent()">CrÃ©er l'Ã©preuve</button>
            </div>
        </div>
    </div>

    <!-- Modal SÃ©rie -->
    <div id="serieModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h3 id="serieModalTitle">Nouvelle SÃ©rie</h3>
            <div style="display: grid; gap: 15px;">
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ… Ã‰preuve:</label>
                    <select id="serieEventId" onchange="updateSerieFromEvent()" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd; background: #e8f4f8; font-weight: bold;">
                        <option value="">-- SÃ©lectionnez une Ã©preuve --</option>
                        <!-- Les Ã©preuves seront chargÃ©es ici -->
                    </select>
                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #7f8c8d;">
                        SÃ©lectionnez l'Ã©preuve Ã  laquelle cette sÃ©rie appartient (ex: 400m Dames - SÃ©rie 1)
                    </p>
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ“ Nom de la sÃ©rie:</label>
                    <input type="text" id="serieName" placeholder="Ex: SÃ©rie 1, SÃ©rie A, Finale..." style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ‘¥ Participants:</label>
                    <div style="max-height: 300px; overflow-y: auto; border: 2px solid #ddd; border-radius: 5px; padding: 15px; background: #f8f9fa;">
                        <div id="participantsCheckboxList">
                            <!-- Les checkboxes des participants seront gÃ©nÃ©rÃ©es ici -->
                        </div>
                    </div>
                </div>

                <div style="background: #fff3cd; padding: 12px; border-radius: 8px; border-left: 4px solid #f39c12;">
                    <p style="margin: 0; font-size: 13px; color: #856404;">
                        <strong>ğŸ’¡ Astuce:</strong> Les paramÃ¨tres (distance, type de sport) sont hÃ©ritÃ©s de l'Ã©preuve sÃ©lectionnÃ©e.
                    </p>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeSerieModal()">Annuler</button>
                <button class="btn btn-success" onclick="saveSerie()">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Modal Gestion des Participants -->
    <div id="participantsManagerModal" class="modal">
        <div class="modal-content" style="max-width: 1000px;">
            <h3>ğŸ‘¥ Gestion des Participants</h3>

            <!-- Formulaire d'ajout de participant -->
            <div style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="color: white; margin: 0;">â• Ajouter un participant</h4>
                    <button class="btn" onclick="showBulkParticipantsModal()" style="background: white; color: #f5576c; font-weight: bold;">
                        ğŸ“‹ Ajout en masse
                    </button>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                    <div>
                        <label style="color: white; font-weight: bold; display: block; margin-bottom: 5px;">ğŸƒ PrÃ©nom / Ã‰quipe:</label>
                        <input type="text" id="participantName" placeholder="Ex: Jean Dupont ou Ã‰quipe A" style="width: 100%; padding: 10px; border-radius: 5px; border: none;">
                    </div>
                    <div>
                        <label style="color: white; font-weight: bold; display: block; margin-bottom: 5px;">ğŸ“‹ CatÃ©gorie:</label>
                        <input type="text" id="participantCategory" placeholder="Ex: U18, Senior, Dames..." style="width: 100%; padding: 10px; border-radius: 5px; border: none;">
                    </div>
                    <div>
                        <label style="color: white; font-weight: bold; display: block; margin-bottom: 5px;">ğŸ”¢ Dossard:</label>
                        <input type="text" id="participantBib" placeholder="Ex: 42" style="width: 100%; padding: 10px; border-radius: 5px; border: none;">
                    </div>
                </div>
                <button class="btn btn-success" onclick="addParticipantToChrono()" style="margin-top: 15px; width: 100%;">
                    âœ… Ajouter
                </button>
            </div>

            <!-- Liste des participants -->
            <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #ddd;">
                <h4 style="margin: 0 0 15px 0; color: #2c3e50;">ğŸ“‹ Liste des participants</h4>
                <div id="participantsList" style="max-height: 400px; overflow-y: auto;">
                    <!-- La liste des participants sera affichÃ©e ici -->
                </div>
            </div>

            <div class="modal-buttons" style="margin-top: 20px;">
                <button class="btn" onclick="closeParticipantsManager()" style="background: linear-gradient(135deg, #16a085, #1abc9c); color: white;">
                    âœ… Fermer
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Ã‰dition Participant -->
    <div id="editParticipantModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <h3>âœï¸ Ã‰diter le participant</h3>
            <div style="display: grid; gap: 15px;">
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸƒ PrÃ©nom / Ã‰quipe:</label>
                    <input type="text" id="editParticipantName" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ“‹ CatÃ©gorie:</label>
                    <input type="text" id="editParticipantCategory" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ”¢ Dossard:</label>
                    <input type="text" id="editParticipantBib" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd;">
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeEditParticipantModal()">Annuler</button>
                <button class="btn btn-success" onclick="saveParticipantEdit()">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Modal Ã‰dition Temps Participant -->
    <div id="editTimeModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <h3>âœï¸ Ã‰diter les performances</h3>
            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #f39c12;">
                <p style="margin: 0; font-size: 14px; color: #856404;">
                    <strong>âš ï¸ Attention:</strong> Vous modifiez manuellement les donnÃ©es de performance. Ces changements remplaceront les valeurs chronomÃ©trÃ©es automatiquement.
                </p>
            </div>
            <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <div style="margin-bottom: 10px;">
                    <strong>Participant:</strong> <span id="editTimeParticipantName" style="color: #2c3e50;"></span>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Dossard:</strong> <span id="editTimeParticipantBib" style="color: #e67e22; font-weight: bold;"></span>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Temps actuel:</strong> <span id="editTimeCurrentTime" style="color: #27ae60; font-family: monospace; font-weight: bold;"></span>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Tours actuels:</strong> <span id="editTimeCurrentLaps" style="color: #3498db; font-weight: bold;"></span>
                </div>
                <div>
                    <strong>Distance par tour:</strong> <span id="editTimeDistancePerLap" style="color: #16a085; font-weight: bold;"></span>
                </div>
            </div>
            <div style="display: grid; gap: 15px;">
                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">ğŸ”„ Nombre de tours:</label>
                    <input type="number" id="editTimeLaps" min="0" value="0" style="width: 100%; padding: 12px; border-radius: 5px; border: 2px solid #3498db; text-align: center; font-size: 20px; font-weight: bold;">
                    <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px; text-align: center;">
                        Distance totale: <span id="editTimeTotalDistance" style="font-weight: bold; color: #27ae60;">0 km</span>
                    </div>
                </div>

                <div>
                    <label style="font-weight: bold; display: block; margin-bottom: 5px;">â±ï¸ Nouveau temps:</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="font-size: 12px; color: #7f8c8d; display: block; margin-bottom: 3px;">Heures</label>
                            <input type="number" id="editTimeHours" min="0" max="23" value="0" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd; text-align: center; font-size: 18px; font-weight: bold;">
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #7f8c8d; display: block; margin-bottom: 3px;">Minutes</label>
                            <input type="number" id="editTimeMinutes" min="0" max="59" value="0" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd; text-align: center; font-size: 18px; font-weight: bold;">
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #7f8c8d; display: block; margin-bottom: 3px;">Secondes</label>
                            <input type="number" id="editTimeSeconds" min="0" max="59" value="0" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd; text-align: center; font-size: 18px; font-weight: bold;">
                        </div>
                        <div>
                            <label style="font-size: 12px; color: #7f8c8d; display: block; margin-bottom: 3px;">CentiÃ¨mes</label>
                            <input type="number" id="editTimeCentiseconds" min="0" max="99" value="0" style="width: 100%; padding: 10px; border-radius: 5px; border: 2px solid #ddd; text-align: center; font-size: 18px; font-weight: bold;">
                        </div>
                    </div>
                </div>
                <div style="background: #e8f4f8; padding: 12px; border-radius: 8px; text-align: center;">
                    <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">AperÃ§u du nouveau temps:</div>
                    <div id="editTimePreview" style="font-size: 32px; font-weight: bold; color: #2c3e50; font-family: monospace;">00:00:00.00</div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeEditTimeModal()">Annuler</button>
                <button class="btn btn-success" onclick="saveEditedTime()">âœ… Enregistrer les modifications</button>
            </div>
        </div>
    </div>

    <!-- Modal Ajout en masse Participants -->
    <div id="bulkParticipantsModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h3>ğŸ“‹ Ajout en masse de participants</h3>

            <div style="background: linear-gradient(135deg, #16a085, #1abc9c); padding: 15px; border-radius: 10px; margin-bottom: 20px; color: white;">
                <h4 style="margin: 0 0 10px 0;">ğŸ“ Format d'importation</h4>
                <p style="margin: 5px 0; font-size: 14px;">Collez vos donnÃ©es avec <strong>une ligne par participant</strong> dans l'un des formats suivants :</p>
                <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px; margin-top: 10px; font-family: monospace; font-size: 13px;">
                    <div style="margin-bottom: 5px;"><strong>Format 1 (avec tabulations) :</strong> Dossard &nbsp;&nbsp;&nbsp; Nom &nbsp;&nbsp;&nbsp; CatÃ©gorie</div>
                    <div style="margin-bottom: 5px;">Exemple: 42 &nbsp;&nbsp;&nbsp; Jean Dupont &nbsp;&nbsp;&nbsp; Senior</div>
                    <div style="margin: 10px 0;"><strong>Format 2 (avec virgules) :</strong> Dossard,Nom,CatÃ©gorie</div>
                    <div>Exemple: 42,Jean Dupont,Senior</div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label style="font-weight: bold; display: block; margin-bottom: 5px;">Collez vos donnÃ©es ici :</label>
                <textarea id="bulkParticipantsText"
                          placeholder="Exemple:&#10;42&#9;Jean Dupont&#9;Senior&#10;43&#9;Marie Martin&#9;U18&#10;44&#9;Ã‰quipe A&#9;Relais&#10;&#10;ou avec virgules:&#10;42,Jean Dupont,Senior&#10;43,Marie Martin,U18"
                          style="width: 100%; height: 300px; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-family: monospace; font-size: 13px; resize: vertical;"></textarea>
            </div>

            <div id="bulkParticipantsPreview" style="display: none; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 10px;">ğŸ‘€ AperÃ§u (<span id="bulkPreviewCount">0</span> participants)</h4>
                <div style="max-height: 200px; overflow-y: auto; border: 2px solid #ddd; border-radius: 8px; padding: 15px; background: #f8f9fa;">
                    <div id="bulkParticipantsPreviewContent"></div>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn" onclick="previewBulkParticipants()" style="background: #3498db; color: white;">
                    ğŸ‘ï¸ PrÃ©visualiser
                </button>
                <button class="btn btn-danger" onclick="closeBulkParticipantsModal()">Annuler</button>
                <button class="btn btn-success" onclick="saveBulkParticipants()">
                    âœ… Ajouter tous les participants
                </button>
            </div>
        </div>
    </div>

    <!-- Modal SÃ©lection Type de Classement Chrono -->
    <div id="chronoRankingTypeModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">ğŸ† Choisissez le Type de Classement</h3>

            <div style="background: linear-gradient(135deg, #16a085, #1abc9c); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                <p style="margin: 0; font-size: 14px;">SÃ©lectionnez le type de classement que vous souhaitez afficher en fonction de vos Ã©preuves</p>
            </div>

            <div id="rankingTypeOptions" style="display: grid; gap: 15px;">
                <!-- Les options seront gÃ©nÃ©rÃ©es dynamiquement ici -->
            </div>

            <div class="modal-buttons" style="margin-top: 20px;">
                <button class="btn btn-danger" onclick="closeChronoRankingTypeModal()">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal Configuration Export PDF Chrono -->
    <div id="chronoPdfConfigModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">ğŸ“„ Configuration Export PDF</h3>

            <div style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                <p style="margin: 0; font-size: 14px;">Personnalisez votre export PDF</p>
            </div>

            <!-- Champ personnalisation du titre -->
            <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #ddd; margin-bottom: 15px;">
                <h4 style="color: #2c3e50; margin-bottom: 10px;">ğŸ“ Titre du document :</h4>
                <input type="text"
                       id="pdfCustomTitle"
                       placeholder="Entrez un titre personnalisÃ© (optionnel)"
                       style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 14px; font-family: Arial, sans-serif;">
                <p style="margin: 8px 0 0 0; font-size: 12px; color: #7f8c8d;">
                    ğŸ’¡ Laissez vide pour utiliser le titre par dÃ©faut : <span id="pdfDefaultTitle" style="font-weight: bold; color: #2c3e50;"></span>
                </p>
            </div>

            <!-- SÃ©lection des colonnes -->
            <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #ddd;">
                <h4 style="color: #2c3e50; margin-bottom: 15px;">ğŸ“Š Colonnes Ã  inclure :</h4>
                <div id="pdfColumnsCheckboxes" style="display: grid; gap: 12px;">
                    <!-- Les checkboxes seront gÃ©nÃ©rÃ©es dynamiquement ici -->
                </div>
            </div>

            <div class="modal-buttons" style="margin-top: 20px;">
                <button class="btn btn-danger" onclick="closeChronoPdfConfigModal()">Annuler</button>
                <button class="btn btn-success" onclick="confirmChronoPdfExport()">
                    âœ… GÃ©nÃ©rer le PDF
                </button>
            </div>
        </div>
    </div>

        <script src="script.js"></script>

    </body>
 </html>
