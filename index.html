<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Championnats</title>
    <link rel="stylesheet"  href="styles.css">


</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ Gestionnaire de Championnats</h1>
            <p>Cr√©√© avec ‚ù§Ô∏è par Romain</p>
        </div>

        <!-- ONGLETS -->
        <div class="tabs-container">
            <div class="tabs" id="tabs">
                <button class="tab active" onclick="switchTab(1)" data-day="1">
                    Journ√©e 1
                </button>
                 <button class="add-day-btn" onclick="addNewDay()" title="Ajouter une journ√©e">+</button>
                <button class="tab general-ranking" onclick="switchToGeneralRanking()" data-tab="general">
                    üèÜ Classement G√©n√©ral
                </button>
            </div>
        </div>

        <div class="content">
            <!-- CONFIGURATION -->
            <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 15px; border-radius: 10px; margin-bottom: 20px; color: white;">
                <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap; justify-content: center;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-weight: bold;">‚öôÔ∏è Divisions:</span>
                        <select id="divisionConfig" onchange="updateDivisionConfig()" style="padding: 8px; border-radius: 5px; border: none; font-size: 14px;">
                            <option value="1">1 Division</option>
                            <option value="2">2 Divisions</option>
                            <option value="3" selected>3 Divisions</option>
                            <option value="4">4 Divisions</option>
                            <option value="5">5 Divisions</option>
                            <option value="6">6 Divisions</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-weight: bold;">üéæ Terrains:</span>
                        <select id="courtConfig" onchange="updateCourtConfig()" style="padding: 8px; border-radius: 5px; border: none; font-size: 14px;">
                            <option value="1">1 Terrain</option>
                            <option value="2">2 Terrains</option>
                            <option value="3">3 Terrains</option>
                            <option value="4" selected>4 Terrains</option>
                            <option value="5">5 Terrains</option>
                            <option value="6">6 Terrains</option>
                            <option value="8">8 Terrains</option>
                            <option value="10">10 Terrains</option>
                        </select>
                    </div>
                    <button class="btn" onclick="applyConfiguration()" style="background: white; color: #667eea; font-weight: bold; padding: 8px 20px;">
                        ‚úÖ Appliquer Configuration
                    </button>
                </div>
                <div id="courtAssignmentInfo" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; font-size: 13px; text-align: center;">
                    <!-- Information sur l'attribution des terrains sera ajout√©e ici -->
                </div>
            </div>

            <!-- CONTENU JOURN√âE -->
            <div class="tab-content day-content active" id="day-1">
                <div class="section">
                    <h2>üë• Gestion des Joueurs - Journ√©e 1</h2>
                    <div style="text-align: center; margin: 15px 0; padding: 15px; background: linear-gradient(135deg, #fff3cd, #ffeaa7); border-radius: 8px; border: 3px solid #f39c12;">
                    <strong style="color: #e67e22; font-size: 18px;">‚ö†Ô∏è CHOISISSEZ D'ABORD LA JOURN√âE DE DESTINATION !</strong>
                    </div>

                    <div class="input-group" style="align-items: end;">
                        <input type="text" id="playerName" placeholder="Nom du joueur" style="flex: 1; min-width: 200px;">
                        <select id="playerDivision">
                                <option value="1">Division 1</option>
                                <option value="2">Division 2</option>
                                <option value="3">Division 3</option>
                            </select>
                            <div style="display: flex; flex-direction: column; min-width: 180px;">
                             <label style="font-size: 14px; color: #e67e22; font-weight: bold; margin-bottom: 5px; text-transform: uppercase;">üéØ Destination :</label>
                                <select id="targetDay" style="background: #f39c12; color: white; font-weight: bold; border: 3px solid #e67e22; padding: 12px; border-radius: 8px; font-size: 14px;">
                        <option value="1">‚Üí Journ√©e 1</option>
        </select>
    </div>
    <button class="btn btn-success" onclick="addPlayer()">Ajouter Joueur</button>
</div>

                    <div class="import-section">
                        <div class="import-box">
                            <h4>üìÅ Import fichier Excel/CSV</h4>
                            <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 15px;">
                                Format : Colonne A = Noms, Colonne B = Division (1,2,3)
                            </p>
                            <div style="margin-bottom: 10px;">
                                <label style="font-weight: bold; color: #e67e22; display: block; margin-bottom: 5px; font-size: 12px;">üéØ DESTINATION :</label>
                                    <select id="fileTargetDay" style="width: 100%; background: #f39c12; color: white; font-weight: bold; border: 2px solid #e67e22; padding: 10px; border-radius: 6px;">
                                     <option value="1">‚Üí Journ√©e 1</option>
                              </select>
                            </div>
                            <div class="file-input-wrapper">
                                <input type="file" id="fileInput" accept=".xlsx,.xls,.csv">
                                <label for="fileInput" class="file-input-label">
                                    üìé Choisir un fichier
                                </label>
                            </div>
                        </div>

                        <div class="import-box">
                            <h4>üìã Copier-coller par division</h4>
                            <p style="font-size: 14px; color: #7f8c8d; margin-bottom: 15px;">
                                Collez une liste de noms (un par ligne)
                            </p>
                            <div style="display: flex; gap: 10px; flex-direction: column;">
                                <select id="bulkDivision" style="width: 100%;">
                                            <option value="1">Division 1</option>
                                            <option value="2">Division 2</option>
                                            <option value="3">Division 3</option>
                                            </select>
                                                <div>
                                            <label style="font-weight: bold; color: #e67e22; display: block; margin-bottom: 5px; font-size: 12px;">üéØ DESTINATION :</label>
                                            <select id="bulkTargetDay" style="width: 100%; background: #f39c12; color: white; font-weight: bold; border: 2px solid #e67e22; padding: 10px; border-radius: 6px;">
                            <option value="1">‚Üí Journ√©e 1</option>
                    </select>
                    </div>
                                    <button class="btn" onclick="showBulkInput()" style="width: 100%;">
                                            üìù Ajouter en masse
                                        </button>
                                </div>
                        </div>
                    </div>

                    <div style="text-align: center; margin: 20px auto; max-width: 1000px;">
                        <h3 style="color: #2c3e50; margin-bottom: 15px;">üéØ Choisir le type de g√©n√©ration</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px;">
                            <button class="btn" onclick="generateMatchesForDay()" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                                üîÑ Round-Robin Classique
                            </button>
                            <button class="btn" onclick="generateMatchesOptimized4to10()" style="background: linear-gradient(135deg, #e67e22, #d35400);">
                                üé≤ Optimis√© 4-10 joueurs
                            </button>
                            <button class="btn" onclick="generateMatchesByCourtOptimized()" style="background: linear-gradient(135deg, #16a085, #1abc9c);">
                                üéæ Par Terrain (4-10/terrain)
                            </button>
                            <button class="btn" onclick="generateMatchesSwissSystem()" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                                üèÜ Swiss System
                            </button>
                        </div>
                        <div style="margin-top: 10px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 12px; color: #7f8c8d; line-height: 1.6;">
                            <strong>Round-Robin:</strong> Tous contre tous ‚Ä¢
                            <strong>Optimis√© 4-10:</strong> Sch√©ma fixe division enti√®re ‚Ä¢
                            <strong>Par Terrain:</strong> 4-10 joueurs/terrain, 1 match/tour/terrain ‚Ä¢
                            <strong>Swiss:</strong> Appariement par niveau
                        </div>
                    </div>

                    <div class="guide-box">
                        <div class="guide-title">
                            üí° Guide d'utilisation
                        </div>
                        <div class="guide-items">
                            <div class="guide-item">
                                <div class="key">TAB</div>
                                <span>Passer au champ suivant</span>
                            </div>
                            <div class="guide-item">
                                <div class="key">ENTER</div>
                                <span>Mettre √† jour le match</span>
                            </div>
                            <div class="guide-item">
                                <span>üèÜ Entrez les scores finaux de chaque √©quipe/joueur</span>
                            </div>
                            <div class="guide-item">
                                <span>üíæ Sauvegarde automatique</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-buttons">
    <button class="btn btn-success" onclick="updateRankings()">
        üèÜ Afficher les Classements
    </button>
    <button class="btn" onclick="generateMatchesForDay(1)">
        üéØ G√©n√©rer les Matchs
    </button>
    <button class="btn" onclick="showByeManagementModal(1)" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
        üéØ G√©rer BYE
    </button>
    <button class="btn btn-danger" onclick="clearAllData()">
        üóëÔ∏è R√©initialiser TOUT
    </button>
    <button class="btn" onclick="exportChampionship()">
        üíæ Exporter Championnat
    </button>
    <button class="btn" onclick="showImportModal()">
        üì• Importer Championnat
    </button>
</div>
                </div>

                <div class="divisions" id="divisions-1">
                    <!-- Les divisions seront g√©n√©r√©es dynamiquement -->
                </div>

                <div class="rankings-section" id="rankings-1" style="display: none;">
                    <div class="rankings-header">
                        <div class="rankings-title">üèÜ Classements Journ√©e 1</div>
                        <div class="rankings-toggle">
                            <button class="toggle-btn active" onclick="showRankings('points')">Par Points</button>
                            <button class="toggle-btn" onclick="showRankings('winrate')">Par % Victoires</button>
                        </div>
                    </div>
                    <div id="rankingsContent-1"></div>
                </div>

                <div class="stats" id="stats-1" style="display: none;">
                    <h3>üìä Statistiques Journ√©e 1</h3>
                    <div class="stats-grid" id="statsContent-1"></div>
                </div>
            </div>

            <!-- CLASSEMENT G√âN√âRAL -->
            <div class="tab-content general-content" id="general-ranking">
                <div class="section general-ranking-section">
                    <h2>üèÜ Classement G√©n√©ral du Championnat</h2>

                    <div class="general-stats" id="generalStats">
                        <!-- Stats g√©n√©rales seront g√©n√©r√©es ici -->
                    </div>

                    <div class="control-buttons" style="margin-bottom: 30px;">
                        <button class="btn btn-warning" onclick="updateGeneralRanking()">
                            üîÑ Mettre √† jour Classement G√©n√©ral
                        </button>
                         <button class="btn btn-success" onclick="exportGeneralRanking()">
                            üìä Exporter JSON
                        </button>
                        <button class="btn" onclick="exportGeneralRankingToPDF()" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            üìÑ Exporter PDF
                        </button>
                        <button class="btn" onclick="exportGeneralRankingToHTML()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                        üìÑ Exporter HTML
                        </button>
                    </div>

                    <div id="generalRankingContent">
                        <div class="empty-state">
                            Terminez au moins un match dans une journ√©e pour voir le classement g√©n√©ral
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <h3>Importer un Championnat</h3>
            <div style="margin-bottom: 20px;">
                <div class="file-input-wrapper">
                    <input type="file" id="importFileInput" accept=".json">
                    <label for="importFileInput" class="file-input-label">
                        üìÅ Choisir un fichier JSON
                    </label>
                </div>
            </div>
            <p style="margin: 15px 0; color: #7f8c8d; font-size: 14px;">
                ‚ö†Ô∏è L'import remplacera compl√®tement le championnat actuel
            </p>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeImportModal()">Annuler</button>
                <button class="btn btn-success" onclick="processImport()">Importer</button>
            </div>
        </div>
    </div>

    <div id="bulkModal" class="modal">
        <div class="modal-content">
            <h3>Ajouter plusieurs joueurs</h3>
            <p style="margin-bottom: 15px; color: #7f8c8d;">
                Collez la liste des noms (un par ligne) pour la <strong id="selectedDivision">Division 1</strong> :
            </p>
            <textarea id="bulkText" placeholder="Joueur 1&#10;Joueur 2&#10;Joueur 3&#10;..."
                      style="width: 100%; height: 200px; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-family: inherit; resize: vertical;"></textarea>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeBulkModal()">Annuler</button>
                <button class="btn btn-success" onclick="addBulkPlayers()">Ajouter tous</button>
            </div>
        </div>
    </div>

    <div id="playerModal" class="player-modal">
        <div class="player-modal-content">
            <div class="player-modal-header">
                <div class="player-name-title" id="playerNameTitle"></div>
                <button class="close-modal" onclick="closePlayerModal()">√ó</button>
            </div>
            <div class="player-overview" id="playerOverview"></div>
            <div class="matches-history">
                <h3 style="color: #2c3e50; margin-bottom: 15px;">üìã Historique des matchs</h3>
                <div id="playerMatches"></div>
            </div>
        </div>
    </div>
        <script src="script.js"></script>

    </body>
 </html>
